<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pong</title>
    <link rel="stylesheet" href="css/reset.css">
    <link rel="stylesheet" href="css/style.css?v=1100">
    <style>
        body { margin:0; background:#000; color:#fff; font-family:system-ui,-apple-system,sans-serif; min-height:100vh; display:flex; flex-direction:column; align-items:center; justify-content:center; }
        header nav { position:absolute; top:20px; left:20px; }
        header a { color:#00f5ff; text-decoration:none; font-size:1.2rem; }
        canvas { border:4px solid #00f5ff; box-shadow:0 0 40px #00f5ff60; image-rendering:pixelated; touch-action:none; }
        .score { position:absolute; top:80px; font-size:3rem; font-weight:bold; color:#00f5ff; text-shadow:0 0 20px #00f5ff; }
        .score-left  { left:20%; }
        .score-right { right:20%; }
        .game-over { position:absolute; font-size:4rem; color:#00f5ff; text-shadow:0 0 30px #00f5ff; display:none; }
        footer { position:absolute; bottom:20px; font-size:0.9rem; opacity:0.7; }
        @media (max-width:900px) {
            canvas { width:95vw; height:60vh; }
            .score { font-size:2.5rem; top:60px; }
            .score-left { left:10%; }
            .score-right { right:10%; }
        }
    </style>
</head>
<body>
    <header><nav><a href="index.html">← Home</a></nav></header>

    <canvas id="pong" width="800" height="500"></canvas>

    <div class="score score-left" id="playerScore">0</div>
    <div class="score score-right" id="aiScore">0</div>

    <div class="game-over" id="gameOver">YOU WIN!</div>

    <footer>
        <p>© 2025 Jesse · -What a headache this crap is-</p>
    </footer>

    <script>
        const canvas = document.getElementById("pong");
        const ctx = canvas.getContext("2d");
        const playerScoreEl = document.getElementById("playerScore");
        const aiScoreEl = document.getElementById("aiScore");
        const gameOverEl = document.getElementById("gameOver");

        // Responsive canvas
        function resizeCanvas() {
            canvas.width = window.innerWidth * 0.9;
            canvas.height = window.innerHeight * 0.6;
        }
        window.addEventListener("resize", resizeCanvas);
        resizeCanvas();

        let ball = { x: canvas.width/2, y: canvas.height/2, dx: 5, dy: 5, radius: 10 };
        let paddleHeight = 100, paddleWidth = 16;
        let player = { y: canvas.height/2 - paddleHeight/2 };
        let ai = { y: canvas.height/2 - paddleHeight/2 };
        let playerScore = 0, aiScore = 0;
        const winningScore = 10;

        function draw() {
            ctx.fillStyle = "#000";
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            // Center line
            ctx.setLineDash([10, 10]);
            ctx.strokeStyle = "#00f5ff40";
            ctx.lineWidth = 4;
            ctx.beginPath();
            ctx.moveTo(canvas.width/2, 0);
            ctx.lineTo(canvas.width/2, canvas.height);
            ctx.stroke();
            ctx.setLineDash([]);

            // Paddles
            ctx.fillStyle = "#00f5ff";
            ctx.fillRect(20, player.y, paddleWidth, paddleHeight);
            ctx.fillRect(canvas.width - 36, ai.y, paddleWidth, paddleHeight);

            // Ball
            ctx.beginPath();
            ctx.arc(ball.x, ball.y, ball.radius, 0, Math.PI * 2);
            ctx.fillStyle = "#fff";
            ctx.fill();
        }

        function update() {
            ball.x += ball.dx;
            ball.y += ball.dy;

            if (ball.y - ball.radius < 0 || ball.y + ball.radius > canvas.height) ball.dy *= -1;

            // Player collision
            if (ball.x - ball.radius < 36 && ball.y > player.y && ball.y < player.y + paddleHeight) {
                ball.dx = -ball.dx * 1.05;
                let deltaY = ball.y - (player.y + paddleHeight/2);
                ball.dy = deltaY * 0.3;
            }

            // AI collision
            if (ball.x + ball.radius > canvas.width - 36 && ball.y > ai.y && ball.y < ai.y + paddleHeight) {
                ball.dx = -ball.dx;
                let deltaY = ball.y - (ai.y + paddleHeight/2);
                ball.dy = deltaY * 0.3;
            }

            // Scoring
            if (ball.x < 0) { aiScore++; aiScoreEl.textContent = aiScore; resetBall(); }
            if (ball.x > canvas.width) { playerScore++; playerScoreEl.textContent = playerScore; resetBall(); }

            // AI movement (medium difficulty)
            if (ai.y + paddleHeight/2 < ball.y - 35) ai.y += 4;
            if (ai.y + paddleHeight/2 > ball.y + 35) ai.y -= 4;

            // Win
            if (playerScore >= winningScore || aiScore >= winningScore) {
                gameOverEl.textContent = playerScore >= winningScore ? "YOU WIN!" : "AI WINS!";
                gameOverEl.style.display = "block";
                ball.dx = ball.dy = 0;
            }
        }

        function resetBall() {
            ball.x = canvas.width/2;
            ball.y = canvas.height/2;
            ball.dx = -ball.dx;
            ball.dy = 5 * (Math.random() > 0.5 ? 1 : -1);
        }

        // Mouse control (desktop)
        canvas.addEventListener("mousemove", (e) => {
            const rect = canvas.getBoundingClientRect();
            player.y = e.clientY - rect.top - paddleHeight / 2;
            player.y = Math.max(0, Math.min(player.y, canvas.height - paddleHeight));
        });

        // Touch control (phone)
        canvas.addEventListener("touchmove", (e) => {
            e.preventDefault();
            const touch = e.touches[0];
            const rect = canvas.getBoundingClientRect();
            player.y = touch.clientY - rect.top - paddleHeight / 2;
            player.y = Math.max(0, Math.min(player.y, canvas.height - paddleHeight));
        });

        // Tap to restart after game over
        canvas.addEventListener("click", () => {
            if (playerScore >= winningScore || aiScore >= winningScore) {
                playerScore = aiScore = 0;
                playerScoreEl.textContent = aiScoreEl.textContent = 0;
                gameOverEl.style.display = "none";
                resetBall();
            }
        });

        function gameLoop() {
            draw();
            update();
            requestAnimationFrame(gameLoop);
        }

        gameLoop();
    </script>
</body>
</html>
