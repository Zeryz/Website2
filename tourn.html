<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pool Tournament Manager</title>
    <link rel="stylesheet" href="css/reset.css">
    <link rel="stylesheet" href="css/style.css?v=100">
    <style>
        body { background:#000; color:#fff; font-family:system-ui,-apple-system,sans-serif; min-height:100vh; padding:2rem; }
        header nav { text-align:center; margin-bottom:2rem; }
        header a { color:#00f5ff; text-decoration:none; font-size:1.2rem; }
        .hero { text-align:center; margin-bottom:3rem; }
        .hero h1 { font-size:clamp(3rem,10vw,6rem); background:linear-gradient(90deg,#00f5ff,#80f8ff); -webkit-background-clip:text; background-clip:text; -webkit-text-fill-color:transparent; }
        .hero p { font-size:1.5rem; opacity:0.9; }
        .photo { width:140px; height:140px; border-radius:50%; border:5px solid #00f5ff; box-shadow:0 0 40px #00f5ff60; }
        .calc-container { background:#111; padding:3rem; border-radius:20px; border:4px solid #00f5ff; box-shadow:0 0 50px #00f5ff60; max-width:800px; margin:0 auto; }
        .inputs { display:grid; gap:1.5rem; margin-bottom:2rem; }
        label { display:block; margin-bottom:0.5rem; color:#00f5ff; font-weight:bold; }
        textarea, select { width:100%; padding:1rem; background:#000; border:2px solid #00f5ff; border-radius:8px; color:#fff; font-size:1rem; height:200px; }
        button { width:100%; padding:1.2rem; background:#00f5ff; color:#000; border:none; border-radius:12px; font-size:1.4rem; font-weight:bold; cursor:pointer; margin-top:1rem; }
        button:hover { background:#80f8ff; }
        .result { margin-top:2rem; padding:1.5rem; background:#000; border-radius:12px; border:1px solid #00f5ff40; font-size:1.4rem; line-height:1.8; white-space:pre-wrap; }
        footer { text-align:center; margin-top:4rem; opacity:0.7; font-size:0.9rem; }
    </style>
</head>
<body>
    <header>
        <nav><a href="index.html">← Home</a></nav>
    </header>

    <main>
        <section class="hero">
            <h1>Pool Tournament Manager</h1>
            <p>Enter player names (one per line), choose type, generate bracket</p>
            <img src="images/photo.jpg" alt="Jesse" class="photo">
        </section>

        <div class="calc-container">
            <div class="inputs">
                <div>
                    <label>Player Names (one per line)</label>
                    <textarea id="players" placeholder="Player 1\nPlayer 2\nPlayer 3\n..."></textarea>
                </div>
                <div>
                    <label>Tournament Type</label>
                    <select id="type">
                        <option value="single">Single Elimination</option>
                        <option value="double">Double Elimination</option>
                    </select>
                </div>
            </div>

            <button onclick="generateBracket()">Generate Bracket</button>

            <div class="result" id="result">
                Enter player names and click Generate Bracket
            </div>
        </div>
    </main>

    <footer>
        <p>© 2025 Jesse · -What a headache this crap is-</p>
    </footer>

    <script>
        function generateBracket() {
            const text = document.getElementById('players').value.trim();
            if (!text) {
                document.getElementById('result').innerHTML = "Enter at least 2 player names.";
                return;
            }

            let players = text.split('\n').map(p => p.trim()).filter(p => p);
            if (players.length < 2) {
                document.getElementById('result').innerHTML = "Need at least 2 players.";
                return;
            }

            shuffle(players);

            const type = document.getElementById('type').value;
            let html = `<strong>${type === 'single' ? 'Single' : 'Double'} Elimination Tournament (${players.length} players)</strong><br><br>`;

            if (type === 'single') {
                html += generateSingle(players);
            } else {
                html += generateDouble(players);
            }

            document.getElementById('result').innerHTML = html;
        }

        function shuffle(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }

        function nextPowerOf2(n) {
            return Math.pow(2, Math.ceil(Math.log2(n)));
        }

        function generateSingle(players) {
            let size = nextPowerOf2(players.length);
            let byes = size - players.length;
            let bracket = [...players];
            for (let i = 0; i < byes; i++) bracket.push('BYE');
            shuffle(bracket);

            let html = '<strong>Winners Bracket - Round 1</strong><br>';
            for (let i = 0; i < bracket.length; i += 2) {
                const p1 = bracket[i];
                const p2 = bracket[i + 1] || 'BYE';
                html += `${p1} vs ${p2}<br>`;
            }

            let round = 2;
            let numMatches = bracket.length / 4;
            while (numMatches >= 1) {
                html += `<br><strong>Round ${round}</strong><br>`;
                for (let i = 0; i < numMatches; i++) {
                    html += `Winner Match ${i*2 + 1} vs Winner Match ${i*2 + 2}<br>`;
                }
                numMatches /= 2;
                round++;
            }

            html += '<br><strong>Champion: Winner of final</strong>';
            return html;
        }

        function generateDouble(players) {
            let html = '<strong>Winners Bracket</strong><br>';
            html += generateSingle(players);

            html += '<br><strong>Losers Bracket</strong><br>';
            html += 'Losers from Winners Round 1 play each other.<br>';
            html += 'Winners advance, eventually challenging Winners bracket finalist.<br>';
            html += 'Grand Final: Winners finalist vs Losers finalist (Winners needs 1 win, Losers needs 2).';

            return html;
        }
    </script>
</body>
</html>
