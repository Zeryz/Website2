<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prime & Divisor Finder</title>
    <meta name="description" content="Jesse’s prime number tool">
    <link rel="stylesheet" href="css/reset.css">
    <link rel="stylesheet" href="css/style.css?v=30">
    <script src="https://cdn.jsdelivr.net/npm/@wasm-toolkit/wasm-run@0.2.5/dist/browser.js"></script>
    <style>
        .tool {
            background: #111;
            padding: 2rem;
            border-radius: 16px;
            border: 3px solid #00f5ff;
            box-shadow: 0 0 30px #00f5ff40;
            max-width: 600px;
            margin: 3rem auto;
        }
        input, button {
            padding: 1rem;
            font-size: 1.2rem;
            margin: 1rem 0;
            width: 100%;
            border-radius: 8px;
        }
        button {
            background: #00f5ff;
            color: #000;
            border: none;
            cursor: pointer;
            font-weight: bold;
        }
        button:hover { background: #80f8ff; }
        pre { 
            background: #000; 
            padding: 1.5rem; 
            border-radius: 12px; 
            margin-top: 1rem;
            white-space: pre-wrap;
            border: 1px solid #333;
        }
    </style>
</head>
<body>
    <header><nav><a href="index.html">← Home</a></nav></header>
    <main>
        <section class="hero">
            <h1>Prime Checker</h1>
            <p>Enter a number and I’ll tell you everything</p>
            <img src="images/photo.jpg" alt="Jesse" class="profile-photo">
        </section>

        <div class="tool">
            <input type="number" id="numInput" placeholder="Enter a number (e.g. 42)" min="2">
            <button onclick="runPrime()">Run Jesse’s Code</button>
            <pre id="output"></pre>
        </div>
    </main>
    <footer>
        <p>© 2025 Jesse · -What a headache this crap is-</p>
    </footer>

    <script>
        const cppCode = `
#include <iostream>
using namespace std;
int c;
bool f=true;
bool e;
bool m=true;
int n;
int d;
int g;
int j;
int k;
int l;
int z;
int y;
int x;
int w;
int main() {
    cin>>c;
    cout<<"You entered "<<c<<"."<<endl;
    for(d=2; (d<c); ++d) {
       if(c % d == 0){
       ++z;
       y=(c / d);
     if(d<=y) { cout<<d<<", "<<y<<endl;}
   if(z>0) { f = false;}
       }
    }
if(f==false){
cout<<"These "<<z<<" numbers will devide into your number evenly."<<endl;
}
if(f){
       cout<<c<<" is a prime number."<<endl;
       cout<<"These are the prime numbers that come before it:"<<endl;
 for(l=--c; (l>0); --l, (m = true)){
for(j=2; (j<l); ++j) {
 if(l % j == 0) {
     ++k;
  if(k > 0){m = false;}
  }
  }
  }
 if (m){
cout<<l<<endl;
n++;
 }
   }
   cout<<"There are "<<n<<" prime numbers before "<<++c<<"."<<endl;
}
}
        `;

        async function runPrime() {
            const input = document.getElementById("numInput").value || "2";
            const { instance } = await WebAssembly.instantiateStreaming(
                await wasmRun.compile(cppCode, { input: [input] })
            );
            const output = instance.exports._start.capturedOutput || "No output";
            document.getElementById("output").textContent = output;
        }
    </script>
</body>
</html>
